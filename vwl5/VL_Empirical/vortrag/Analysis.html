<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="Analysis_files/libs/quarto-html/quarto.js"></script>
<script src="Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="democracy-does-cause-growth" class="level1">
<h1>Democracy Does Cause Growth</h1>
<p>by</p>
<ul>
<li>Daron Acemoglu (MIT)</li>
<li>James A Robinson (Chicago)</li>
<li>Suresh Naidu (Columbia)</li>
<li>Pascual Restrepo (Boston University)</li>
</ul>
<section id="question-and-problems" class="level2">
<h2 class="anchored" data-anchor-id="question-and-problems">Question and Problems</h2>
<p>Does democracy cause growth?</p>
<p>Problems with the Question:</p>
<ul>
<li>direct comparison between democracies / non-democracies difficult</li>
<li>correlation with other changes</li>
<li>indices of democracy lacking</li>
</ul>
</section>
<section id="regression" class="level2">
<h2 class="anchored" data-anchor-id="regression">Regression</h2>
<p>Regression Formulae:</p>
<p><span class="math display">\[
y_{ct} = \beta D_t + E_{j=1}^p \gamma_j y_{ct-j} + \alpha_c + \delta_t + \epsilon_{ct}
\]</span></p>
<p>Formula: …</p>
<ul>
<li><span class="math inline">\(y_ct\)</span> = log GDP per capita in country <em>c</em> at time <em>t</em>
<ul>
<li>column: <code>gdppercapitaconstant2000us</code></li>
<li>already logged with <code>y</code></li>
</ul></li>
<li><span class="math inline">\(D_{ct}\)</span> = Dichotomous measure of democracy
<ul>
<li>column: <code>dem</code></li>
</ul></li>
<li><em>p</em> lags of log GDP for control</li>
<li><span class="math inline">\(\alpha\)</span> = country fixed effects</li>
<li><span class="math inline">\(e\)</span> = error</li>
</ul>
<p>Estimators</p>
<ul>
<li>within estimators</li>
<li>HHK estimators (not implemented in R!)</li>
<li>GMM Estimation with <code>pdynmc</code> <a href="https://web.archive.org/web/20220216220804/https://cran.r-project.org/web/packages/pdynmc/vignettes/pdynmc-pres-in-a-nutshell.pdf">Intro here</a></li>
</ul>
<p>Result somethin like this:</p>
<p><img src="images/2023-11-15_15-01-55.jpg" class="img-fluid"></p>
<p><img src="images/2023-11-15_15-02-02.jpg" class="img-fluid"></p>
<p>R-Code</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stargazer' was built under R version 4.1.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Please cite as: </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> Hlavac, Marek (2022). stargazer: Well-Formatted Regression and Summary Statistics Tables.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code> R package version 5.2.3. https://CRAN.R-project.org/package=stargazer </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'plm' was built under R version 4.1.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdynmc)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ ggplot2 3.3.5     ✓ purrr   0.3.4
✓ tibble  3.1.5     ✓ dplyr   1.0.7
✓ tidyr   1.1.4     ✓ stringr 1.4.0
✓ readr   2.0.2     ✓ forcats 0.5.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
x dplyr::between() masks plm::between()
x dplyr::filter()  masks stats::filter()
x dplyr::lag()     masks plm::lag(), stats::lag()
x dplyr::lead()    masks plm::lead()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>DDCGdata <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"DDCGdata.dta"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> DDCGdata <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">loggdp =</span> <span class="fu">log</span>(gdppercapitaconstant2000us))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(DDCGData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rm(DDCGData): object 'DDCGData' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 31
  country_name wbcode  year gdppercapitacon… lp_bl  ls_bl  lh_bl taxratio region
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 Afghanistan  AFG     1960               NA  2.74  0.392  0.586   0.0490 MNA   
2 Afghanistan  AFG     1961               NA NA    NA     NA       0.0490 MNA   
3 Afghanistan  AFG     1962               NA NA    NA     NA       0.0652 MNA   
4 Afghanistan  AFG     1963               NA NA    NA     NA       0.0508 MNA   
5 Afghanistan  AFG     1964               NA NA    NA     NA       0.0666 MNA   
6 Afghanistan  AFG     1965               NA  3.48  0.487  0.864   0.0672 MNA   
# … with 22 more variables: wbcode2 &lt;dbl&gt;, demCGV &lt;dbl&gt;, demBMR &lt;dbl&gt;,
#   yeardem &lt;dbl&gt;, yearrev &lt;dbl&gt;, secenr &lt;dbl&gt;, prienr &lt;dbl&gt;, tradewb &lt;dbl&gt;,
#   mortnew &lt;dbl&gt;, ginv &lt;dbl&gt;, rtfpna &lt;dbl&gt;, y &lt;dbl&gt;, dem &lt;dbl&gt;, yy1 &lt;dbl&gt;,
#   yy2 &lt;dbl&gt;, yy3 &lt;dbl&gt;, yy4 &lt;dbl&gt;, yy5 &lt;dbl&gt;, yy6 &lt;dbl&gt;, yy7 &lt;dbl&gt;,
#   yy8 &lt;dbl&gt;, loggdp &lt;dbl&gt;</code></pre>
</div>
</div>
<p>1177 Columns and around 10000 rows</p>
<p>Making it in a panel dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pdf <span class="ot">=</span> <span class="fu">pdata.frame</span>(df, <span class="at">index=</span><span class="fu">c</span>(<span class="st">"country_name"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Estimating the Dynamic Linear Model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">plm</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  y <span class="sc">~</span> dem <span class="sc">+</span> plm<span class="sc">::</span><span class="fu">lag</span>(y, <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">factor</span>(country_name) <span class="sc">+</span> <span class="fu">factor</span>(year), <span class="co">#the equation with country fixed effects</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">model=</span><span class="st">"within"</span>, <span class="co">#The fixed effects within estimator</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pdf, </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Oneway (individual) effect Within Model

Call:
plm(formula = y ~ dem + plm::lag(y, 1) + factor(country_name) + 
    factor(year), data = pdf, model = "within")

Unbalanced Panel: n = 175, T = 9-50, N = 6790

Residuals:
     Min.   1st Qu.    Median   3rd Qu.      Max. 
-65.02556  -2.08935   0.18715   2.46114  62.53569 

Coefficients:
                   Estimate Std. Error  t-value  Pr(&gt;|t|)    
dem               0.9729199  0.2397441   4.0582 5.004e-05 ***
plm::lag(y, 1)    0.9726609  0.0025371 383.3771 &lt; 2.2e-16 ***
factor(year)1962  1.0168936  0.9068003   1.1214 0.2621550    
factor(year)1963  0.7727622  0.9041549   0.8547 0.3927601    
factor(year)1964  2.0006603  0.8990703   2.2253 0.0260980 *  
factor(year)1965  1.4321035  0.8942096   1.6015 0.1093077    
factor(year)1966  0.4940188  0.8761677   0.5638 0.5728820    
factor(year)1967  1.0790389  0.8723452   1.2369 0.2161535    
factor(year)1968  1.9222274  0.8707398   2.2076 0.0273081 *  
factor(year)1969  2.9041641  0.8692610   3.3410 0.0008396 ***
factor(year)1970  3.0354315  0.8679645   3.4972 0.0004733 ***
factor(year)1971  1.8281592  0.8593805   2.1273 0.0334324 *  
factor(year)1972  2.0442218  0.8583345   2.3816 0.0172653 *  
factor(year)1973  1.7027051  0.8573960   1.9859 0.0470857 *  
factor(year)1974  2.1593454  0.8565232   2.5211 0.0117237 *  
factor(year)1975  0.1377510  0.8558375   0.1610 0.8721341    
factor(year)1976  2.8110126  0.8496748   3.3083 0.0009436 ***
factor(year)1977  1.3109198  0.8492301   1.5437 0.1227197    
factor(year)1978  1.6736029  0.8454503   1.9795 0.0477969 *  
factor(year)1979  0.7138771  0.8437786   0.8460 0.3975569    
factor(year)1980 -0.6371651  0.8429434  -0.7559 0.4497475    
factor(year)1981  0.2544473  0.8284039   0.3072 0.7587362    
factor(year)1982 -1.0549780  0.8231745  -1.2816 0.2000293    
factor(year)1983 -1.0181927  0.8199650  -1.2418 0.2143727    
factor(year)1984  0.7464628  0.8190135   0.9114 0.3621092    
factor(year)1985 -0.0314993  0.8166463  -0.0386 0.9692332    
factor(year)1986  0.5978056  0.8143922   0.7341 0.4629438    
factor(year)1987  0.4225338  0.8133024   0.5195 0.6034097    
factor(year)1988  1.7026683  0.8116987   2.0977 0.0359733 *  
factor(year)1989  0.1230983  0.8111025   0.1518 0.8793757    
factor(year)1990 -0.3600823  0.8102597  -0.4444 0.6567655    
factor(year)1991 -1.5884730  0.8019830  -1.9807 0.0476686 *  
factor(year)1992 -2.8966903  0.8015463  -3.6139 0.0003039 ***
factor(year)1993 -1.8371387  0.8009205  -2.2938 0.0218343 *  
factor(year)1994 -0.9957351  0.8001349  -1.2445 0.2133751    
factor(year)1995  1.0869671  0.7990151   1.3604 0.1737552    
factor(year)1996  2.0650502  0.7987064   2.5855 0.0097453 ** 
factor(year)1997  2.3331865  0.8001391   2.9160 0.0035578 ** 
factor(year)1998  1.3127959  0.8010215   1.6389 0.1012816    
factor(year)1999  1.2505129  0.8026549   1.5580 0.1192884    
factor(year)2000  1.8356626  0.8032947   2.2852 0.0223348 *  
factor(year)2001  1.3101150  0.8042811   1.6289 0.1033765    
factor(year)2002  1.2641858  0.8053620   1.5697 0.1165305    
factor(year)2003  1.8270762  0.8062589   2.2661 0.0234767 *  
factor(year)2004  3.7887795  0.8077969   4.6903 2.784e-06 ***
factor(year)2005  3.2084172  0.8109218   3.9565 7.686e-05 ***
factor(year)2006  3.9862045  0.8132438   4.9016 9.734e-07 ***
factor(year)2007  4.0754899  0.8161362   4.9936 6.078e-07 ***
factor(year)2008  2.3957441  0.8200658   2.9214 0.0034964 ** 
factor(year)2009 -1.5166846  0.8220538  -1.8450 0.0650834 .  
factor(year)2010  2.7077243  0.8272245   3.2733 0.0010686 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Total Sum of Squares:    7666600
Residual Sum of Squares: 203390
R-Squared:      0.97347
Adj. R-Squared: 0.97256
F-statistic: 4722.85 on 51 and 6564 DF, p-value: &lt; 2.22e-16</code></pre>
</div>
</div>
<p>first two estiamtes for Lag and Dem look good!</p>
<p>Now the Long Run effect</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="ot">&lt;-</span> <span class="fu">coef</span>(model1)[<span class="st">"dem"</span>]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>gamma_hat <span class="ot">&lt;-</span> <span class="fu">coef</span>(model1)[<span class="st">"plm::lag(y, 1)"</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>long_run_effect <span class="ot">&lt;-</span> beta_hat <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(gamma_hat))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>long_run_effect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     dem 
35.58715 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">plm</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  y <span class="sc">~</span> dem <span class="sc">+</span> plm<span class="sc">::</span><span class="fu">lag</span>(y, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">factor</span>(country_name) <span class="sc">+</span> <span class="fu">factor</span>(year), <span class="co">#the equation with country fixed effects</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">model=</span><span class="st">"within"</span>, <span class="co">#The fixed effects within estimator</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pdf, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Oneway (individual) effect Within Model

Call:
plm(formula = y ~ dem + plm::lag(y, 1:2) + factor(country_name) + 
    factor(year), data = pdf, model = "within")

Unbalanced Panel: n = 175, T = 8-49, N = 6642

Residuals:
     Min.   1st Qu.    Median   3rd Qu.      Max. 
-62.86438  -1.90942   0.15516   2.23071  59.01248 

Coefficients:
                   Estimate Std. Error  t-value  Pr(&gt;|t|)    
dem                0.650609   0.229213   2.8385 0.0045475 ** 
plm::lag(y, 1:2)1  1.266318   0.011588 109.2794 &lt; 2.2e-16 ***
plm::lag(y, 1:2)2 -0.299513   0.011522 -25.9959 &lt; 2.2e-16 ***
factor(year)1963  -0.689428   0.837232  -0.8235 0.4102765    
factor(year)1964   0.683741   0.832241   0.8216 0.4113545    
factor(year)1965  -0.173651   0.827793  -0.2098 0.8338494    
factor(year)1966  -1.137523   0.818789  -1.3893 0.1647975    
factor(year)1967  -0.047513   0.810505  -0.0586 0.9532559    
factor(year)1968   0.615613   0.806971   0.7629 0.4455699    
factor(year)1969   1.408312   0.805664   1.7480 0.0805094 .  
factor(year)1970   1.298384   0.802769   1.6174 0.1058449    
factor(year)1971   0.130719   0.803523   0.1627 0.8707732    
factor(year)1972   0.727650   0.793134   0.9174 0.3589485    
factor(year)1973   0.363136   0.792228   0.4584 0.6466995    
factor(year)1974   0.944055   0.791306   1.1930 0.2329001    
factor(year)1975  -1.166848   0.790674  -1.4758 0.1400564    
factor(year)1976   1.960274   0.789378   2.4833 0.0130420 *  
factor(year)1977  -0.138689   0.785959  -0.1765 0.8599391    
factor(year)1978   0.687994   0.784967   0.8765 0.3808121    
factor(year)1979  -0.342953   0.779077  -0.4402 0.6598041    
factor(year)1980  -1.247926   0.779570  -1.6008 0.1094731    
factor(year)1981  -0.106334   0.775967  -0.1370 0.8910078    
factor(year)1982  -1.690245   0.764966  -2.2096 0.0271702 *  
factor(year)1983  -1.195668   0.758887  -1.5756 0.1151777    
factor(year)1984   0.542663   0.756058   0.7178 0.4729351    
factor(year)1985  -0.730557   0.756113  -0.9662 0.3339800    
factor(year)1986   0.244996   0.753823   0.3250 0.7451884    
factor(year)1987  -0.257955   0.751656  -0.3432 0.7314730    
factor(year)1988   1.037617   0.750808   1.3820 0.1670199    
factor(year)1989  -0.412358   0.749450  -0.5502 0.5821917    
factor(year)1990  -0.778226   0.748147  -1.0402 0.2982838    
factor(year)1991  -1.393821   0.748373  -1.8625 0.0625829 .  
factor(year)1992  -2.809687   0.740770  -3.7929 0.0001502 ***
factor(year)1993  -1.465818   0.741299  -1.9774 0.0480434 *  
factor(year)1994  -0.852164   0.739651  -1.1521 0.2493160    
factor(year)1995   0.878576   0.738298   1.1900 0.2340895    
factor(year)1996   1.302084   0.737597   1.7653 0.0775602 .  
factor(year)1997   1.304715   0.737717   1.7686 0.0770108 .  
factor(year)1998   0.086281   0.739110   0.1167 0.9070732    
factor(year)1999   0.548846   0.740249   0.7414 0.4584571    
factor(year)2000   1.176544   0.741432   1.5869 0.1125949    
factor(year)2001   0.505957   0.742314   0.6816 0.4955206    
factor(year)2002   0.646500   0.742947   0.8702 0.3842331    
factor(year)2003   1.246896   0.743833   1.6763 0.0937259 .  
factor(year)2004   3.071293   0.745228   4.1213 3.815e-05 ***
factor(year)2005   1.950339   0.748265   2.6065 0.0091689 ** 
factor(year)2006   2.951690   0.750442   3.9333 8.468e-05 ***
factor(year)2007   2.861195   0.753294   3.7982 0.0001471 ***
factor(year)2008   1.212875   0.757088   1.6020 0.1091992    
factor(year)2009  -2.164496   0.759050  -2.8516 0.0043641 ** 
factor(year)2010   3.285977   0.766183   4.2888 1.823e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Total Sum of Squares:    7228700
Residual Sum of Squares: 175250
R-Squared:      0.97576
Adj. R-Squared: 0.97491
F-statistic: 5063.42 on 51 and 6416 DF, p-value: &lt; 2.22e-16</code></pre>
</div>
</div>
<p>Long Run Effect</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="ot">&lt;-</span> <span class="fu">coef</span>(model2)[<span class="st">"dem"</span>]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>gamma_hat <span class="ot">&lt;-</span> (<span class="fu">coef</span>(model2)[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>long_run_effect <span class="ot">&lt;-</span> beta_hat <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(gamma_hat))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>long_run_effect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     dem 
19.59946 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">plm</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  y <span class="sc">~</span> dem <span class="sc">+</span> plm<span class="sc">::</span><span class="fu">lag</span>(y, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">+</span> <span class="fu">factor</span>(country_name) <span class="sc">+</span> <span class="fu">factor</span>(year), <span class="co">#the equation with country fixed effects</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">model=</span><span class="st">"within"</span>, <span class="co">#The fixed effects within estimator</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pdf, </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Oneway (individual) effect Within Model

Call:
plm(formula = y ~ dem + plm::lag(y, 1:4) + factor(country_name) + 
    factor(year), data = pdf, model = "within")

Unbalanced Panel: n = 175, T = 6-47, N = 6336

Residuals:
     Min.   1st Qu.    Median   3rd Qu.      Max. 
-63.95467  -1.84198   0.14589   2.14199  59.88866 

Coefficients:
                   Estimate Std. Error  t-value  Pr(&gt;|t|)    
dem                0.786553   0.228341   3.4446 0.0005757 ***
plm::lag(y, 1:4)1  1.238106   0.012546  98.6829 &lt; 2.2e-16 ***
plm::lag(y, 1:4)2 -0.206543   0.019819 -10.4215 &lt; 2.2e-16 ***
plm::lag(y, 1:4)3 -0.026095   0.019220  -1.3577 0.1746170    
plm::lag(y, 1:4)4 -0.042501   0.011797  -3.6025 0.0003176 ***
factor(year)1965  -0.918627   0.788224  -1.1654 0.2438866    
factor(year)1966  -1.938401   0.779319  -2.4873 0.0128982 *  
factor(year)1967  -1.044385   0.779696  -1.3395 0.1804652    
factor(year)1968  -0.238359   0.779862  -0.3056 0.7598877    
factor(year)1969   0.804449   0.771812   1.0423 0.2973206    
factor(year)1970   0.508852   0.766786   0.6636 0.5069606    
factor(year)1971  -0.766929   0.765611  -1.0017 0.3165174    
factor(year)1972  -0.009235   0.762603  -0.0121 0.9903383    
factor(year)1973  -0.346959   0.761630  -0.4555 0.6487309    
factor(year)1974   0.248118   0.751915   0.3300 0.7414252    
factor(year)1975  -1.828926   0.751323  -2.4343 0.0149502 *  
factor(year)1976   1.244681   0.750177   1.6592 0.0971302 .  
factor(year)1977  -0.758584   0.751793  -1.0090 0.3129988    
factor(year)1978  -0.039620   0.751703  -0.0527 0.9579668    
factor(year)1979  -0.720001   0.745831  -0.9654 0.3343995    
factor(year)1980  -1.954303   0.744714  -2.6242 0.0087060 ** 
factor(year)1981  -0.736332   0.738653  -0.9969 0.3188729    
factor(year)1982  -2.204091   0.739538  -2.9804 0.0028904 ** 
factor(year)1983  -1.870238   0.737494  -2.5359 0.0112393 *  
factor(year)1984   0.295423   0.726209   0.4068 0.6841678    
factor(year)1985  -1.000519   0.721584  -1.3866 0.1656266    
factor(year)1986  -0.163817   0.719411  -0.2277 0.8198799    
factor(year)1987  -0.597143   0.719557  -0.8299 0.4066416    
factor(year)1988   0.464047   0.717335   0.6469 0.5177186    
factor(year)1989  -0.830148   0.715626  -1.1600 0.2460822    
factor(year)1990  -1.541570   0.714108  -2.1587 0.0309095 *  
factor(year)1991  -2.035426   0.713563  -2.8525 0.0043525 ** 
factor(year)1992  -2.623138   0.713378  -3.6771 0.0002380 ***
factor(year)1993  -1.517899   0.714564  -2.1242 0.0336909 *  
factor(year)1994  -1.219971   0.708175  -1.7227 0.0849939 .  
factor(year)1995   0.658934   0.706465   0.9327 0.3510013    
factor(year)1996   0.733647   0.704710   1.0411 0.2978877    
factor(year)1997   0.841999   0.703576   1.1967 0.2314536    
factor(year)1998  -0.494037   0.703104  -0.7027 0.4822997    
factor(year)1999  -0.194101   0.703583  -0.2759 0.7826537    
factor(year)2000   0.658637   0.705216   0.9340 0.3503661    
factor(year)2001   0.047967   0.706314   0.0679 0.9458587    
factor(year)2002   0.097442   0.707289   0.1378 0.8904278    
factor(year)2003   0.736401   0.707827   1.0404 0.2982103    
factor(year)2004   2.595924   0.708977   3.6615 0.0002529 ***
factor(year)2005   1.504311   0.712005   2.1128 0.0346600 *  
factor(year)2006   2.350260   0.713397   3.2945 0.0009917 ***
factor(year)2007   2.257982   0.716171   3.1529 0.0016247 ** 
factor(year)2008   0.607813   0.719831   0.8444 0.3984883    
factor(year)2009  -2.835375   0.721774  -3.9283 8.648e-05 ***
factor(year)2010   2.637328   0.729678   3.6144 0.0003035 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Total Sum of Squares:    6397300
Residual Sum of Squares: 154460
R-Squared:      0.97586
Adj. R-Squared: 0.97497
F-statistic: 4842.06 on 51 and 6110 DF, p-value: &lt; 2.22e-16</code></pre>
</div>
</div>
<p>Long Run</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="ot">&lt;-</span> <span class="fu">coef</span>(model3)[<span class="st">"dem"</span>]</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>gamma_hat <span class="ot">&lt;-</span> <span class="fu">coef</span>(model3)[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>long_run_effect <span class="ot">&lt;-</span> beta_hat <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(gamma_hat))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>long_run_effect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     dem 
21.23958 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>model4 <span class="ot">&lt;-</span> <span class="fu">plm</span>(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  y <span class="sc">~</span> dem <span class="sc">+</span> plm<span class="sc">::</span><span class="fu">lag</span>(y, <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>) <span class="sc">+</span> <span class="fu">factor</span>(country_name) <span class="sc">+</span> <span class="fu">factor</span>(year), <span class="co">#the equation with country fixed effects</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">model=</span><span class="st">"within"</span>, <span class="co">#The fixed effects within estimator</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pdf, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Oneway (individual) effect Within Model

Call:
plm(formula = y ~ dem + plm::lag(y, 1:8) + factor(country_name) + 
    factor(year), data = pdf, model = "within")

Unbalanced Panel: n = 175, T = 2-43, N = 5688

Residuals:
     Min.   1st Qu.    Median   3rd Qu.      Max. 
-64.16826  -1.74149   0.15926   2.11117  59.76890 

Coefficients:
                    Estimate Std. Error  t-value  Pr(&gt;|t|)    
dem                0.8871243  0.2390289   3.7114 0.0002082 ***
plm::lag(y, 1:8)1  1.2334933  0.0131433  93.8495 &lt; 2.2e-16 ***
plm::lag(y, 1:8)2 -0.2136260  0.0206486 -10.3458 &lt; 2.2e-16 ***
plm::lag(y, 1:8)3 -0.0214706  0.0205086  -1.0469 0.2951892    
plm::lag(y, 1:8)4 -0.0387811  0.0202442  -1.9157 0.0554595 .  
plm::lag(y, 1:8)5 -0.0186976  0.0199722  -0.9362 0.3492194    
plm::lag(y, 1:8)6  0.0105445  0.0195214   0.5402 0.5891143    
plm::lag(y, 1:8)7  0.0154950  0.0187536   0.8262 0.4087028    
plm::lag(y, 1:8)8 -0.0072668  0.0116695  -0.6227 0.5334986    
factor(year)1969   1.0928038  0.7406323   1.4755 0.1401355    
factor(year)1970   0.6003068  0.7390659   0.8123 0.4166832    
factor(year)1971  -0.4549887  0.7395125  -0.6153 0.5384120    
factor(year)1972   0.0113158  0.7375387   0.0153 0.9877594    
factor(year)1973   0.0149335  0.7279883   0.0205 0.9836346    
factor(year)1974   0.7023610  0.7252971   0.9684 0.3328990    
factor(year)1975  -1.6518169  0.7229126  -2.2849 0.0223541 *  
factor(year)1976   1.8227597  0.7203011   2.5306 0.0114162 *  
factor(year)1977  -0.3128162  0.7214099  -0.4336 0.6645831    
factor(year)1978   0.3494096  0.7130799   0.4900 0.6241531    
factor(year)1979  -0.2642222  0.7116092  -0.3713 0.7104267    
factor(year)1980  -1.5388042  0.7116204  -2.1624 0.0306310 *  
factor(year)1981  -0.3709933  0.7116563  -0.5213 0.6021722    
factor(year)1982  -1.8896434  0.7117121  -2.6551 0.0079523 ** 
factor(year)1983  -1.5615860  0.7090360  -2.2024 0.0276782 *  
factor(year)1984   0.3627699  0.7071512   0.5130 0.6079707    
factor(year)1985  -0.3939912  0.7016359  -0.5615 0.5744578    
factor(year)1986  -0.0351495  0.7036084  -0.0500 0.9601593    
factor(year)1987  -0.5322702  0.7025069  -0.7577 0.4486797    
factor(year)1988   0.9886181  0.6923493   1.4279 0.1533726    
factor(year)1989  -0.3400415  0.6880703  -0.4942 0.6211877    
factor(year)1990  -1.1249195  0.6857722  -1.6404 0.1009860    
factor(year)1991  -1.2856981  0.6866793  -1.8723 0.0612128 .  
factor(year)1992  -1.7899901  0.6850169  -2.6131 0.0089982 ** 
factor(year)1993  -0.9968564  0.6854051  -1.4544 0.1458916    
factor(year)1994  -0.5529264  0.6854657  -0.8066 0.4199071    
factor(year)1995   0.8757764  0.6849176   1.2787 0.2010713    
factor(year)1996   0.8914031  0.6851152   1.3011 0.1932793    
factor(year)1997   1.1147685  0.6857428   1.6256 0.1040847    
factor(year)1998  -0.2611116  0.6787297  -0.3847 0.7004700    
factor(year)1999   0.1105026  0.6781356   0.1630 0.8705633    
factor(year)2000   1.0032057  0.6761733   1.4837 0.1379590    
factor(year)2001   0.4479471  0.6754791   0.6632 0.5072595    
factor(year)2002   0.4636506  0.6753343   0.6865 0.4923957    
factor(year)2003   1.2756150  0.6750846   1.8896 0.0588693 .  
factor(year)2004   2.5781952  0.6774853   3.8055 0.0001430 ***
factor(year)2005   1.8768343  0.6811299   2.7555 0.0058802 ** 
factor(year)2006   2.7283327  0.6836632   3.9908 6.673e-05 ***
factor(year)2007   2.6017415  0.6859619   3.7928 0.0001505 ***
factor(year)2008   1.0049733  0.6896818   1.4572 0.1451311    
factor(year)2009  -2.3860931  0.6915896  -3.4502 0.0005645 ***
factor(year)2010   3.0531955  0.6976857   4.3762 1.230e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Total Sum of Squares:    4758500
Residual Sum of Squares: 129290
R-Squared:      0.97283
Adj. R-Squared: 0.97171
F-statistic: 3834.63 on 51 and 5462 DF, p-value: &lt; 2.22e-16</code></pre>
</div>
</div>
<p>Long Run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="ot">&lt;-</span> <span class="fu">coef</span>(model4)[<span class="st">"dem"</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>gamma_hat <span class="ot">&lt;-</span> (<span class="fu">coef</span>(model4)[<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>])</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>long_run_effect <span class="ot">&lt;-</span> beta_hat <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(gamma_hat))</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>long_run_effect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     dem 
22.00799 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">c</span>(model1, model2,model3)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#stargazer(models, type="html", out="table.html")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="iv" class="level3">
<h3 class="anchored" data-anchor-id="iv">IV</h3>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>