# Figure 1

```{r}
library(stargazer)
library(plm)

library(tidyverse)
library(haven)
```

```{r}
DDCGdata <- read_dta("DDCGdata.dta")

df <- DDCGdata %>%
  dplyr::select(1:100) %>%
  dplyr::mutate(loggdp = log(gdppercapitaconstant2000us))
  
rm(DDCGData)
head(df)
```

```{r}
pdf = pdata.frame(df, index=c("country_name", "year"))
pdf
```

```{r}
#count number of democratizations in given year

  
```

IVREG?

-   demreg = average democracy in the region \* regime cell = Z

$$
y_{ct} = \beta D_{ct} + E_{j=1}^p \gamma_j y_{ct-j} + \alpha_c + \delta_t + \epsilon_{ct}
$$

with D =

$$
= \sum \pi_j Z_{ct} + \sum \phi  y_{ct} + 
$$

```{r}
library(ivreg)
ivreg(
    y ~ plm::lag(y, 1) + factor(country_name) + factor(year) | 
    plm::lag(demreg, 1) + plm::lag(demreg, 1),
    data=df
    )
summary(ivreg)
```
